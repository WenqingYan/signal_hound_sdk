<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SA API: Modes of Operation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="sh-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">SA API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Modes of Operation </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sweepMode">Swept Spectrum Analysis</a><ul><li class="level2"><a href="#autotoc_md27">Example</a></li>
<li class="level2"><a href="#autotoc_md28">Configuration</a></li>
<li class="level2"><a href="#autotoc_md29">Usage</a></li>
</ul>
</li>
<li class="level1"><a href="#realTimeAnalysis">Real-Time Spectrum Analysis</a><ul><li class="level2"><a href="#autotoc_md30">Example</a></li>
<li class="level2"><a href="#autotoc_md31">Configuration</a></li>
<li class="level2"><a href="#autotoc_md32">Usage</a></li>
</ul>
</li>
<li class="level1"><a href="#IQStreaming">I/Q Streaming</a><ul><li class="level2"><a href="#autotoc_md33">Example</a></li>
<li class="level2"><a href="#autotoc_md34">Configuration</a></li>
<li class="level2"><a href="#autotoc_md35">Usage</a></li>
</ul>
</li>
<li class="level1"><a href="#audioDemod">Audio Demodulation</a><ul><li class="level2"><a href="#autotoc_md36">Configuration</a></li>
<li class="level2"><a href="#autotoc_md37">Usage</a></li>
</ul>
</li>
<li class="level1"><a href="#snaMode">Scalar Network Analysis</a><ul><li class="level2"><a href="#autotoc_md38">Example</a></li>
<li class="level2"><a href="#autotoc_md39">Configuration and Usage</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_C__Users_Roger_Documents_Dev_Checkout_SA_API_docs_page_measurement_types"></a></p>
<p >Now that we have seen how a typical application interfaces with the API, let’s examine the different modes of operation the API provides. Each mode will accept different configurations and have different boundary conditions. Each mode will also provide data formatted to match the mode selected. In the next sections you will see how to interact with each mode.</p>
<p >For a more in-depth examination of each mode of operation (read: theory) refer to the <a href="https://signalhound.com/sigdownloads/Spike/Spike-User-Manual.pdf">Spike User Manual</a>.</p>
<p >Please also see the C++ programming examples for an example of interfacing the device for each measurement type.</p>
<h1><a class="anchor" id="sweepMode"></a>
Swept Spectrum Analysis</h1>
<p >Swept analysis represents the most traditional form of spectrum analysis. This mode offers the largest amount of configuration options, and returns traditional frequency domain sweeps. A frequency domain sweep displays amplitude on the vertical axis and frequency on the horizontal axis.</p>
<h2><a class="anchor" id="autotoc_md27"></a>
Example</h2>
<p >For a list of all examples, please see the <em>examples/</em> folder in the SDK.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sa__api_8h.html">sa_api.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#pragma comment(lib, &quot;sa_api.lib&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// This example is the minimal code needed to configure the device</span></div>
<div class="line"><span class="comment">// to perform a single sweep. The device will block for several seconds</span></div>
<div class="line"><span class="comment">// while opening the device, and the call to saGetSweep will block</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> simpleSweep1()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> handle = -1;</div>
<div class="line">    <a class="code hl_enumeration" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516">saStatus</a> openStatus = <a class="code hl_function" href="sa__api_8h.html#a91d381112ee752949df8b5bb7322378e">saOpenDevice</a>(&amp;handle);</div>
<div class="line">    <span class="keywordflow">if</span>(openStatus != <a class="code hl_enumvalue" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516a393ace7a15801b1377e6934d20f257d7">saNoError</a>) {</div>
<div class="line">        <span class="comment">// Handle unable to open/find device error here</span></div>
<div class="line">        std::cout &lt;&lt; <a class="code hl_function" href="sa__api_8h.html#ac19945a762dbb7abbdc767912c07b0ff">saGetErrorString</a>(openStatus) &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configure the device to sweep a 1MHz span centered on 900MHz</span></div>
<div class="line">    <span class="comment">// Min/Max detector, with RBW/VBW equal to 1kHz</span></div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a3bb77c4b40da0998049ca9f7b379c0b9">saConfigCenterSpan</a>(handle, 900.0e6, 1.0e6);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a92a1eb696b61e843e8095cc261789a3a">saConfigAcquisition</a>(handle, <a class="code hl_define" href="sa__api_8h.html#a33fa4c03855dbbd49e88fc8061110c29">SA_MIN_MAX</a>, <a class="code hl_define" href="sa__api_8h.html#a0eee4c54116f0686d93aa7b7ee5858a9">SA_LOG_SCALE</a>);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a7068aea9fcb8661ae86434ffbfe776cc">saConfigLevel</a>(handle, -10.0);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a586c33d0aecdd536547bb8eecb417cc5">saConfigSweepCoupling</a>(handle, 1.0e3, 1.0e3, <span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize the device with the configuration just set</span></div>
<div class="line">    <a class="code hl_enumeration" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516">saStatus</a> initiateStatus = <a class="code hl_function" href="sa__api_8h.html#afd615afc09212d6a62937a9d06fac9d4">saInitiate</a>(handle, <a class="code hl_define" href="sa__api_8h.html#af91a9ef7d216ec40ac17bc389353c2dd">SA_SWEEPING</a>, 0);</div>
<div class="line">    <span class="keywordflow">if</span>(initiateStatus != <a class="code hl_enumvalue" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516a393ace7a15801b1377e6934d20f257d7">saNoError</a>) {</div>
<div class="line">        <span class="comment">// Handle unable to initialize</span></div>
<div class="line">        std::cout &lt;&lt; <a class="code hl_function" href="sa__api_8h.html#ac19945a762dbb7abbdc767912c07b0ff">saGetErrorString</a>(initiateStatus) &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get sweep characteristics</span></div>
<div class="line">    <span class="keywordtype">int</span> sweepLen;</div>
<div class="line">    <span class="keywordtype">double</span> startFreq, binSize;</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#abfce6ec91fa969330149d1d7489dc2d2">saQuerySweepInfo</a>(handle, &amp;sweepLen, &amp;startFreq, &amp;binSize);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Allocate memory for the sweep</span></div>
<div class="line">    <span class="keywordtype">float</span> *min = <span class="keyword">new</span> <span class="keywordtype">float</span>[sweepLen];</div>
<div class="line">    <span class="keywordtype">float</span> *max = <span class="keyword">new</span> <span class="keywordtype">float</span>[sweepLen];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get 1 or more sweeps with this configuration</span></div>
<div class="line">    <span class="comment">// This function can be called several times and will return a </span></div>
<div class="line">    <span class="comment">//  sweep measured directly after the function is called.</span></div>
<div class="line">    <span class="comment">// The function blocks until the sweep is returned.</span></div>
<div class="line">    <a class="code hl_enumeration" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516">saStatus</a> sweepStatus = <a class="code hl_function" href="sa__api_8h.html#a0d1d0a2ba8e59f2ee767e7d52e66bc4a">saGetSweep_32f</a>(handle, min, max);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">delete</span> [] min;</div>
<div class="line">    <span class="keyword">delete</span> [] max;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#ab4db7a69933089074a057aab3ab4b97e">saAbort</a>(handle);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#ad88fc31781cddf9f49c77a14b69bc63e">saCloseDevice</a>(handle);  </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="asa__api_8h_html"><div class="ttname"><a href="sa__api_8h.html">sa_api.h</a></div><div class="ttdoc">API functions for the SA44/124 spectrum analyzers.</div></div>
<div class="ttc" id="asa__api_8h_html_a0d1d0a2ba8e59f2ee767e7d52e66bc4a"><div class="ttname"><a href="sa__api_8h.html#a0d1d0a2ba8e59f2ee767e7d52e66bc4a">saGetSweep_32f</a></div><div class="ttdeci">SA_API saStatus saGetSweep_32f(int device, float *min, float *max)</div></div>
<div class="ttc" id="asa__api_8h_html_a0eee4c54116f0686d93aa7b7ee5858a9"><div class="ttname"><a href="sa__api_8h.html#a0eee4c54116f0686d93aa7b7ee5858a9">SA_LOG_SCALE</a></div><div class="ttdeci">#define SA_LOG_SCALE</div><div class="ttdef"><b>Definition:</b> sa_api.h:129</div></div>
<div class="ttc" id="asa__api_8h_html_a33fa4c03855dbbd49e88fc8061110c29"><div class="ttname"><a href="sa__api_8h.html#a33fa4c03855dbbd49e88fc8061110c29">SA_MIN_MAX</a></div><div class="ttdeci">#define SA_MIN_MAX</div><div class="ttdef"><b>Definition:</b> sa_api.h:124</div></div>
<div class="ttc" id="asa__api_8h_html_a3bb77c4b40da0998049ca9f7b379c0b9"><div class="ttname"><a href="sa__api_8h.html#a3bb77c4b40da0998049ca9f7b379c0b9">saConfigCenterSpan</a></div><div class="ttdeci">SA_API saStatus saConfigCenterSpan(int device, double center, double span)</div></div>
<div class="ttc" id="asa__api_8h_html_a586c33d0aecdd536547bb8eecb417cc5"><div class="ttname"><a href="sa__api_8h.html#a586c33d0aecdd536547bb8eecb417cc5">saConfigSweepCoupling</a></div><div class="ttdeci">SA_API saStatus saConfigSweepCoupling(int device, double rbw, double vbw, bool reject)</div></div>
<div class="ttc" id="asa__api_8h_html_a7068aea9fcb8661ae86434ffbfe776cc"><div class="ttname"><a href="sa__api_8h.html#a7068aea9fcb8661ae86434ffbfe776cc">saConfigLevel</a></div><div class="ttdeci">SA_API saStatus saConfigLevel(int device, double ref)</div></div>
<div class="ttc" id="asa__api_8h_html_a91d381112ee752949df8b5bb7322378e"><div class="ttname"><a href="sa__api_8h.html#a91d381112ee752949df8b5bb7322378e">saOpenDevice</a></div><div class="ttdeci">SA_API saStatus saOpenDevice(int *device)</div></div>
<div class="ttc" id="asa__api_8h_html_a92a1eb696b61e843e8095cc261789a3a"><div class="ttname"><a href="sa__api_8h.html#a92a1eb696b61e843e8095cc261789a3a">saConfigAcquisition</a></div><div class="ttdeci">SA_API saStatus saConfigAcquisition(int device, int detector, int scale)</div></div>
<div class="ttc" id="asa__api_8h_html_a9c1cbf155261782b245b98199e307516"><div class="ttname"><a href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516">saStatus</a></div><div class="ttdeci">saStatus</div><div class="ttdef"><b>Definition:</b> sa_api.h:237</div></div>
<div class="ttc" id="asa__api_8h_html_a9c1cbf155261782b245b98199e307516a393ace7a15801b1377e6934d20f257d7"><div class="ttname"><a href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516a393ace7a15801b1377e6934d20f257d7">saNoError</a></div><div class="ttdeci">@ saNoError</div><div class="ttdef"><b>Definition:</b> sa_api.h:298</div></div>
<div class="ttc" id="asa__api_8h_html_ab4db7a69933089074a057aab3ab4b97e"><div class="ttname"><a href="sa__api_8h.html#ab4db7a69933089074a057aab3ab4b97e">saAbort</a></div><div class="ttdeci">SA_API saStatus saAbort(int device)</div></div>
<div class="ttc" id="asa__api_8h_html_abfce6ec91fa969330149d1d7489dc2d2"><div class="ttname"><a href="sa__api_8h.html#abfce6ec91fa969330149d1d7489dc2d2">saQuerySweepInfo</a></div><div class="ttdeci">SA_API saStatus saQuerySweepInfo(int device, int *sweepLength, double *startFreq, double *binSize)</div></div>
<div class="ttc" id="asa__api_8h_html_ac19945a762dbb7abbdc767912c07b0ff"><div class="ttname"><a href="sa__api_8h.html#ac19945a762dbb7abbdc767912c07b0ff">saGetErrorString</a></div><div class="ttdeci">SA_API const char * saGetErrorString(saStatus code)</div></div>
<div class="ttc" id="asa__api_8h_html_ad88fc31781cddf9f49c77a14b69bc63e"><div class="ttname"><a href="sa__api_8h.html#ad88fc31781cddf9f49c77a14b69bc63e">saCloseDevice</a></div><div class="ttdeci">SA_API saStatus saCloseDevice(int device)</div></div>
<div class="ttc" id="asa__api_8h_html_af91a9ef7d216ec40ac17bc389353c2dd"><div class="ttname"><a href="sa__api_8h.html#af91a9ef7d216ec40ac17bc389353c2dd">SA_SWEEPING</a></div><div class="ttdeci">#define SA_SWEEPING</div><div class="ttdef"><b>Definition:</b> sa_api.h:108</div></div>
<div class="ttc" id="asa__api_8h_html_afd615afc09212d6a62937a9d06fac9d4"><div class="ttname"><a href="sa__api_8h.html#afd615afc09212d6a62937a9d06fac9d4">saInitiate</a></div><div class="ttdeci">SA_API saStatus saInitiate(int device, int mode, int flag)</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md28"></a>
Configuration</h2>
<p >The configuration routines which affect the sweep results are:</p>
<ul>
<li><a class="el" href="sa__api_8h.html#a92a1eb696b61e843e8095cc261789a3a">saConfigAcquisition</a> – Configuring the detector and linear/log scaling.</li>
<li><a class="el" href="sa__api_8h.html#a3bb77c4b40da0998049ca9f7b379c0b9">saConfigCenterSpan</a> – Configuring the sweep frequency range.</li>
<li><a class="el" href="sa__api_8h.html#a7068aea9fcb8661ae86434ffbfe776cc">saConfigLevel</a> – Configuring reference level for automatic gain and attenuation.</li>
<li><a class="el" href="sa__api_8h.html#aa467613c2863277c4b265bc4659871d0">saConfigGainAtten</a> – Configuring internal amplifiers and attenuators.</li>
<li><a class="el" href="sa__api_8h.html#a586c33d0aecdd536547bb8eecb417cc5">saConfigSweepCoupling</a> – Configuring RBW and VBW.</li>
<li><a class="el" href="sa__api_8h.html#a375944d5eaa1771d44ba0d8880796f2a">saConfigProcUnits</a> – Configuring VBW processing.</li>
</ul>
<p >Once you have configured the device, call <a class="el" href="sa__api_8h.html#afd615afc09212d6a62937a9d06fac9d4">saInitiate</a> using the <a class="el" href="sa__api_8h.html#af91a9ef7d216ec40ac17bc389353c2dd">SA_SWEEPING</a> flag.</p>
<h2><a class="anchor" id="autotoc_md29"></a>
Usage</h2>
<p >This mode is driven by the programmer, causing a sweep to be collected only when the program requests one through the <a class="el" href="sa__api_8h.html#a0d1d0a2ba8e59f2ee767e7d52e66bc4a">saGetSweep_32f</a>/<a class="el" href="sa__api_8h.html#af541c8f2eb96276309b588bfec587650">saGetSweep_64f</a> functions. The length of the sweep is determined by a combination of resolution bandwidth, video bandwidth, and span.</p>
<p >Once the device is initialized you can determine the characteristics of the sweep you will be collecting with <a class="el" href="sa__api_8h.html#abfce6ec91fa969330149d1d7489dc2d2">saQuerySweepInfo</a>. This function returns the length of the sweep, the frequency of the first bin, and the bin size. You will need to allocate two arrays of memory, representing the minimum and maximum values for each frequency bin.</p>
<p >Now you are ready to call the <a class="el" href="sa__api_8h.html#a0d1d0a2ba8e59f2ee767e7d52e66bc4a">saGetSweep_32f</a>/<a class="el" href="sa__api_8h.html#af541c8f2eb96276309b588bfec587650">saGetSweep_64f</a> and <a class="el" href="sa__api_8h.html#ac50c7ed25f054c65d3e7e7dd870b7138">saGetPartialSweep_32f</a>/<a class="el" href="sa__api_8h.html#adf4b207247a7f0defb37dc08e8bfe55c">saGetPartialSweep_64f</a> functions.</p>
<p >You can determine the frequency of any bin in the resulting sweep by the following function, where <code>n</code> is the zero-based index into the sweep array:</p>
<p ><code>Frequency of nth sample point in returned sweep = startFreq + n * binSize</code></p>
<h1><a class="anchor" id="realTimeAnalysis"></a>
Real-Time Spectrum Analysis</h1>
<p >The API provides the functionality of an online real-time spectrum analyzer for the full instantaneous bandwidth of the device (250kHz). In real-time FFTs are applied at an overlapping rate of 87.5%.</p>
<h2><a class="anchor" id="autotoc_md30"></a>
Example</h2>
<p >For a list of all examples, please see the <em>examples/</em> folder in the SDK.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sa__api_8h.html">sa_api.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#pragma comment(lib, &quot;sa_api.lib&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> realTimeSweep()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> handle = -1;</div>
<div class="line">    <a class="code hl_enumeration" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516">saStatus</a> openStatus = <a class="code hl_function" href="sa__api_8h.html#a91d381112ee752949df8b5bb7322378e">saOpenDevice</a>(&amp;handle);</div>
<div class="line">    <span class="keywordflow">if</span>(openStatus != <a class="code hl_enumvalue" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516a393ace7a15801b1377e6934d20f257d7">saNoError</a>) {</div>
<div class="line">        <span class="comment">// Handle unable to open/find device error here</span></div>
<div class="line">        std::cout &lt;&lt; <a class="code hl_function" href="sa__api_8h.html#ac19945a762dbb7abbdc767912c07b0ff">saGetErrorString</a>(openStatus) &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Configure real-time analysis to be centered on a local</span></div>
<div class="line">    <span class="comment">// FM broadcast frequency, with a 1kHz RBW.</span></div>
<div class="line">    <span class="comment">// Set a frame rate of 30fps, and 100dB height on persistence frames.</span></div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a3bb77c4b40da0998049ca9f7b379c0b9">saConfigCenterSpan</a>(handle, 97.1e6, 200.0e3);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a92a1eb696b61e843e8095cc261789a3a">saConfigAcquisition</a>(handle, <a class="code hl_define" href="sa__api_8h.html#a33fa4c03855dbbd49e88fc8061110c29">SA_MIN_MAX</a>, <a class="code hl_define" href="sa__api_8h.html#a0eee4c54116f0686d93aa7b7ee5858a9">SA_LOG_SCALE</a>);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a7068aea9fcb8661ae86434ffbfe776cc">saConfigLevel</a>(handle, -10.0);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a586c33d0aecdd536547bb8eecb417cc5">saConfigSweepCoupling</a>(handle, 1.0e3, 1.0e3, <span class="keyword">true</span>);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a21006fa16448c20b651f3ab94a958d2b">saConfigRealTime</a>(handle, 100.0, 30);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize the device with the configuration just set</span></div>
<div class="line">    <a class="code hl_enumeration" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516">saStatus</a> initiateStatus = <a class="code hl_function" href="sa__api_8h.html#afd615afc09212d6a62937a9d06fac9d4">saInitiate</a>(handle, <a class="code hl_define" href="sa__api_8h.html#aab7ff10d10f79cecb7e3585e80d3b12e">SA_REAL_TIME</a>, 0);</div>
<div class="line">    <span class="keywordflow">if</span>(initiateStatus != <a class="code hl_enumvalue" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516a393ace7a15801b1377e6934d20f257d7">saNoError</a>) {</div>
<div class="line">        <span class="comment">// Unable to initialize</span></div>
<div class="line">        std::cout &lt;&lt; <a class="code hl_function" href="sa__api_8h.html#ac19945a762dbb7abbdc767912c07b0ff">saGetErrorString</a>(initiateStatus) &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get sweep and frame characteristics</span></div>
<div class="line">    <span class="keywordtype">int</span> sweepLen;</div>
<div class="line">    <span class="keywordtype">double</span> startFreq, binSize;</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#abfce6ec91fa969330149d1d7489dc2d2">saQuerySweepInfo</a>(handle, &amp;sweepLen, &amp;startFreq, &amp;binSize);</div>
<div class="line">    <span class="keywordtype">int</span> frameWidth, frameHeight;</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a3aae38edbd72881f542443730ee33364">saQueryRealTimeFrameInfo</a>(handle, &amp;frameWidth, &amp;frameHeight);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Allocate memory for the sweep and frame</span></div>
<div class="line">    <span class="keywordtype">float</span> *max = <span class="keyword">new</span> <span class="keywordtype">float</span>[sweepLen];</div>
<div class="line">    <span class="keywordtype">float</span> *frame = <span class="keyword">new</span> <span class="keywordtype">float</span>[frameWidth * frameHeight];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get 30 frames and sweeps, representing 1 second of real-time analysis</span></div>
<div class="line">    <span class="keywordtype">int</span> frames = 0;</div>
<div class="line">    <span class="keywordflow">while</span>(frames &lt; 30) {</div>
<div class="line">        <a class="code hl_enumeration" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516">saStatus</a> sweepStatus = <a class="code hl_function" href="sa__api_8h.html#a174afb2f9a336699941c04ccc973f5c0">saGetRealTimeFrame</a>(handle, <span class="keyword">nullptr</span>, max, frame, <span class="keyword">nullptr</span>);</div>
<div class="line">        frames++;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Update your application</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#ab4db7a69933089074a057aab3ab4b97e">saAbort</a>(handle);</div>
<div class="line">    <span class="keyword">delete</span> [] max;</div>
<div class="line">    <span class="keyword">delete</span> [] frame;</div>
<div class="line">    </div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#ad88fc31781cddf9f49c77a14b69bc63e">saCloseDevice</a>(handle);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="asa__api_8h_html_a174afb2f9a336699941c04ccc973f5c0"><div class="ttname"><a href="sa__api_8h.html#a174afb2f9a336699941c04ccc973f5c0">saGetRealTimeFrame</a></div><div class="ttdeci">SA_API saStatus saGetRealTimeFrame(int device, float *minSweep, float *maxSweep, float *colorFrame, float *alphaFrame)</div></div>
<div class="ttc" id="asa__api_8h_html_a21006fa16448c20b651f3ab94a958d2b"><div class="ttname"><a href="sa__api_8h.html#a21006fa16448c20b651f3ab94a958d2b">saConfigRealTime</a></div><div class="ttdeci">SA_API saStatus saConfigRealTime(int device, double frameScale, int frameRate)</div></div>
<div class="ttc" id="asa__api_8h_html_a3aae38edbd72881f542443730ee33364"><div class="ttname"><a href="sa__api_8h.html#a3aae38edbd72881f542443730ee33364">saQueryRealTimeFrameInfo</a></div><div class="ttdeci">SA_API saStatus saQueryRealTimeFrameInfo(int device, int *frameWidth, int *frameHeight)</div></div>
<div class="ttc" id="asa__api_8h_html_aab7ff10d10f79cecb7e3585e80d3b12e"><div class="ttname"><a href="sa__api_8h.html#aab7ff10d10f79cecb7e3585e80d3b12e">SA_REAL_TIME</a></div><div class="ttdeci">#define SA_REAL_TIME</div><div class="ttdef"><b>Definition:</b> sa_api.h:110</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md31"></a>
Configuration</h2>
<p >The configuration routines which affect the spectrum results are the same for swept analysis, but span is restricted to 250kHz.</p>
<p >Once you have configured the device, call <a class="el" href="sa__api_8h.html#afd615afc09212d6a62937a9d06fac9d4">saInitiate</a> using the <a class="el" href="sa__api_8h.html#aab7ff10d10f79cecb7e3585e80d3b12e">SA_REAL_TIME</a> flag.</p>
<h2><a class="anchor" id="autotoc_md32"></a>
Usage</h2>
<p >The number of sweep results far exceeds a program’s capability to acquire, view, and process, therefore the API combines sweeps results for a user specified amount of time. It does this in two ways. One, is the API either min/max holds or averages the sweep results into a standard sweep.</p>
<p >Also, the API creates an image frame which acts as a density map for every sweep result processed during a period. Both the sweep and density map are returned at rate specified by the function <a class="el" href="sa__api_8h.html#a21006fa16448c20b651f3ab94a958d2b">saConfigRealTime</a>.</p>
<p >An alpha frame is also provided by the API. The alphaFrame is the same size as the frame and each index correlates to the same index in the frame. The alphaFrame values represent activity in the frame. When activity occurs in the frame, the index correlating to that activity is set to 1. As time passes and no further activity occurs in that bin, the alphaFrame exponentially decays from 1 to 0. The alphaFrame is useful to determine how recent the activity in the frame is and useful for plotting the frames.</p>
<p >For a full example of using real-time see <a class="el" href="modes_of_operation.html#realTimeAnalysis">Real-Time Spectrum Analysis</a>.</p>
<h1><a class="anchor" id="IQStreaming"></a>
I/Q Streaming</h1>
<p >The API can provide programmers with a continuous stream of digital I/Q samples from the device.</p>
<h2><a class="anchor" id="autotoc_md33"></a>
Example</h2>
<p >For a list of all examples, please see the <em>examples/</em> folder in the SDK.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sa__api_8h.html">sa_api.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#pragma comment(lib, &quot;sa_api.lib&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// This example demonstrates configuring the device to stream continuous</span></div>
<div class="line"><span class="comment">// IQ data to your application.</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> iqStreaming()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> handle = -1;</div>
<div class="line">    <a class="code hl_enumeration" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516">saStatus</a> openStatus = <a class="code hl_function" href="sa__api_8h.html#a91d381112ee752949df8b5bb7322378e">saOpenDevice</a>(&amp;handle);</div>
<div class="line">    <span class="keywordflow">if</span>(openStatus != <a class="code hl_enumvalue" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516a393ace7a15801b1377e6934d20f257d7">saNoError</a>) {</div>
<div class="line">        <span class="comment">// Handle unable to open/find device error here</span></div>
<div class="line">        std::cout &lt;&lt; <a class="code hl_function" href="sa__api_8h.html#ac19945a762dbb7abbdc767912c07b0ff">saGetErrorString</a>(openStatus) &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set center freq, span is ignored</span></div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a3bb77c4b40da0998049ca9f7b379c0b9">saConfigCenterSpan</a>(handle, 97.1e3, 1.0e3);</div>
<div class="line">    <span class="comment">// Set expected input level</span></div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a7068aea9fcb8661ae86434ffbfe776cc">saConfigLevel</a>(handle, -10.0);</div>
<div class="line">    <span class="comment">// Configure sample rate and bandwidth</span></div>
<div class="line">    <span class="comment">// Sample rate of 486111.11 / 1 and bandwidth of 250kHz</span></div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a2bf16a07bb4e49fa07cc45b6f2520983">saConfigIQ</a>(handle, 1, 250.0e3);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#afd615afc09212d6a62937a9d06fac9d4">saInitiate</a>(handle, <a class="code hl_define" href="sa__api_8h.html#a898e0ec9419c76dfe2fb99ee73fb374e">SA_IQ</a>, 0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Verify the sample rate and bandwidth of the IQ stream</span></div>
<div class="line">    <span class="keywordtype">double</span> bandwidth, sampleRate;</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#ae501734ec70569e3e1221ccc2fe4cc0f">saQueryStreamInfo</a>(handle, 0, &amp;bandwidth, &amp;sampleRate);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// How many IQ samples to collect per call</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> BUF_SIZE = 4096;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structsa_i_q_packet.html">saIQPacket</a> pkt;</div>
<div class="line">    pkt.<a class="code hl_variable" href="structsa_i_q_packet.html#ae9a2e4751630b8aff7f422e6368d6a70">iqData</a> = <span class="keyword">new</span> <span class="keywordtype">float</span>[BUF_SIZE * 2];</div>
<div class="line">    pkt.<a class="code hl_variable" href="structsa_i_q_packet.html#a30a47e2ae708580cbde1ed4622f11e27">iqCount</a> = BUF_SIZE;</div>
<div class="line">    <span class="comment">// Setting purge to false ensures each call to getIQPacket()</span></div>
<div class="line">    <span class="comment">// returns contiguous IQ data to the last time the function was called.</span></div>
<div class="line">    <span class="comment">// This also means IQ data must be queried at the rate of the</span></div>
<div class="line">    <span class="comment">// device sample rate. In this case, the sample rate is 486.111k,</span></div>
<div class="line">    <span class="comment">// so the saGetIQData function must be called</span></div>
<div class="line">    <span class="comment">// 486111 / 4096 = ~118 times per second.</span></div>
<div class="line">    pkt.<a class="code hl_variable" href="structsa_i_q_packet.html#ac396a652044d92fdd1bd0ed2ed3663b2">purge</a> = <span class="keyword">false</span>; </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Retreive about 1 second worth of contiguous IQ data or</span></div>
<div class="line">    <span class="comment">// 120 * 4096 IQ data values.</span></div>
<div class="line">    <span class="keywordtype">int</span> pktCount = 0;</div>
<div class="line">    <span class="keywordflow">while</span>(pktCount++ &lt; 120) {</div>
<div class="line">        <span class="comment">// Get next contiguous block of IQ data</span></div>
<div class="line">        <a class="code hl_enumeration" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516">saStatus</a> iqStatus = <a class="code hl_function" href="sa__api_8h.html#a4c6f43a6dc8ca2b1025941db51aa09bd">saGetIQData</a>(handle, &amp;pkt);</div>
<div class="line">        std::cout &lt;&lt; pkt.<a class="code hl_variable" href="structsa_i_q_packet.html#a90c2ace84e5523d06b7162ea5928acc1">sec</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; pkt.<a class="code hl_variable" href="structsa_i_q_packet.html#ab1ccf862f499b07df37a749f8dc3d6a9">milli</a> &lt;&lt; std::endl;</div>
<div class="line">        <span class="comment">// Store/process data before getting another buffer</span></div>
<div class="line">        <span class="comment">// Check any errors or status updates </span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Clean up</span></div>
<div class="line">    <span class="keyword">delete</span> [] pkt.<a class="code hl_variable" href="structsa_i_q_packet.html#ae9a2e4751630b8aff7f422e6368d6a70">iqData</a>;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#ab4db7a69933089074a057aab3ab4b97e">saAbort</a>(handle);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#ad88fc31781cddf9f49c77a14b69bc63e">saCloseDevice</a>(handle);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="asa__api_8h_html_a2bf16a07bb4e49fa07cc45b6f2520983"><div class="ttname"><a href="sa__api_8h.html#a2bf16a07bb4e49fa07cc45b6f2520983">saConfigIQ</a></div><div class="ttdeci">SA_API saStatus saConfigIQ(int device, int decimation, double bandwidth)</div></div>
<div class="ttc" id="asa__api_8h_html_a4c6f43a6dc8ca2b1025941db51aa09bd"><div class="ttname"><a href="sa__api_8h.html#a4c6f43a6dc8ca2b1025941db51aa09bd">saGetIQData</a></div><div class="ttdeci">SA_API saStatus saGetIQData(int device, saIQPacket *pkt)</div></div>
<div class="ttc" id="asa__api_8h_html_a898e0ec9419c76dfe2fb99ee73fb374e"><div class="ttname"><a href="sa__api_8h.html#a898e0ec9419c76dfe2fb99ee73fb374e">SA_IQ</a></div><div class="ttdeci">#define SA_IQ</div><div class="ttdef"><b>Definition:</b> sa_api.h:112</div></div>
<div class="ttc" id="asa__api_8h_html_ae501734ec70569e3e1221ccc2fe4cc0f"><div class="ttname"><a href="sa__api_8h.html#ae501734ec70569e3e1221ccc2fe4cc0f">saQueryStreamInfo</a></div><div class="ttdeci">SA_API saStatus saQueryStreamInfo(int device, int *returnLen, double *bandwidth, double *samplesPerSecond)</div></div>
<div class="ttc" id="astructsa_i_q_packet_html"><div class="ttname"><a href="structsa_i_q_packet.html">saIQPacket</a></div><div class="ttdef"><b>Definition:</b> sa_api.h:191</div></div>
<div class="ttc" id="astructsa_i_q_packet_html_a30a47e2ae708580cbde1ed4622f11e27"><div class="ttname"><a href="structsa_i_q_packet.html#a30a47e2ae708580cbde1ed4622f11e27">saIQPacket::iqCount</a></div><div class="ttdeci">int iqCount</div><div class="ttdef"><b>Definition:</b> sa_api.h:199</div></div>
<div class="ttc" id="astructsa_i_q_packet_html_a90c2ace84e5523d06b7162ea5928acc1"><div class="ttname"><a href="structsa_i_q_packet.html#a90c2ace84e5523d06b7162ea5928acc1">saIQPacket::sec</a></div><div class="ttdeci">int sec</div><div class="ttdef"><b>Definition:</b> sa_api.h:224</div></div>
<div class="ttc" id="astructsa_i_q_packet_html_ab1ccf862f499b07df37a749f8dc3d6a9"><div class="ttname"><a href="structsa_i_q_packet.html#ab1ccf862f499b07df37a749f8dc3d6a9">saIQPacket::milli</a></div><div class="ttdeci">int milli</div><div class="ttdef"><b>Definition:</b> sa_api.h:229</div></div>
<div class="ttc" id="astructsa_i_q_packet_html_ac396a652044d92fdd1bd0ed2ed3663b2"><div class="ttname"><a href="structsa_i_q_packet.html#ac396a652044d92fdd1bd0ed2ed3663b2">saIQPacket::purge</a></div><div class="ttdeci">int purge</div><div class="ttdef"><b>Definition:</b> sa_api.h:207</div></div>
<div class="ttc" id="astructsa_i_q_packet_html_ae9a2e4751630b8aff7f422e6368d6a70"><div class="ttname"><a href="structsa_i_q_packet.html#ae9a2e4751630b8aff7f422e6368d6a70">saIQPacket::iqData</a></div><div class="ttdeci">float * iqData</div><div class="ttdef"><b>Definition:</b> sa_api.h:197</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md34"></a>
Configuration</h2>
<p >Configuration routines used to prepare streaming are:</p>
<ul>
<li><a class="el" href="sa__api_8h.html#a3bb77c4b40da0998049ca9f7b379c0b9">saConfigCenterSpan</a> – Set the center frequency of the I/Q data stream. Span is ignored.</li>
<li><a class="el" href="sa__api_8h.html#a7068aea9fcb8661ae86434ffbfe776cc">saConfigLevel</a> – Set the expected input level.</li>
<li><a class="el" href="sa__api_8h.html#aa467613c2863277c4b265bc4659871d0">saConfigGainAtten</a> – See <a class="el" href="index.html#gainAndAtten">Setting Gain and Attenuation</a>.</li>
<li><a class="el" href="sa__api_8h.html#a2bf16a07bb4e49fa07cc45b6f2520983">saConfigIQ</a> – Specify the decimation and bandwidth of the I/Q data stream.</li>
</ul>
<p >Once configured, initialize the device with the <a class="el" href="sa__api_8h.html#a898e0ec9419c76dfe2fb99ee73fb374e">SA_IQ</a> mode.</p>
<h2><a class="anchor" id="autotoc_md35"></a>
Usage</h2>
<p >The digital I/Q stream consists of interleaved 32-bit floating point I/Q pairs scaled to mW. The digital samples are amplitude corrected providing accurate measurements. The I/Q data rate at its highest is 486.111111~ kS/s and can be decimated down by a factor of up to 128 (in powers of two). Each decimation value further reduces the overall bandwidth of the I/Q samples, so the API also provides a configurable bandpass filter to control the overall passband of a given I/Q data stream. The I/Q data stream can also be tuned to an arbitrary center frequency.</p>
<p >Data acquisition begins immediately. The API buffers ~3/4 second worth of digital samples in circular buffers. It is the responsibility of the user application to poll the samples via <a class="el" href="sa__api_8h.html#a4c6f43a6dc8ca2b1025941db51aa09bd">saGetIQData</a> fast enough to prevent the circular buffers from wrapping. We suggest a separate polling thread and synchronized data structure (buffer) for retrieving the samples and using them in your application.</p>
<p >NOTE: Decimation / filtering / calibration occur on the PC and can be processor-intensive on certain hardware. Please characterize the processor load if you think this might be an issue for your application.</p>
<h1><a class="anchor" id="audioDemod"></a>
Audio Demodulation</h1>
<h2><a class="anchor" id="autotoc_md36"></a>
Configuration</h2>
<p >Configure audio demodulation with:</p>
<ul>
<li><a class="el" href="sa__api_8h.html#a69aedfd8c385984f51e9bdb7dfb73468">saConfigAudio</a> - Specify the type of demodulation, the center frequency, and the characteristics of the filters.<ul>
<li>See <a class="el" href="sa__api_8h.html#a69aedfd8c385984f51e9bdb7dfb73468">saConfigAudio</a> to see which types of audio demodulation can be performed.</li>
</ul>
</li>
<li><a class="el" href="sa__api_8h.html#aa467613c2863277c4b265bc4659871d0">saConfigGainAtten</a> - Audio demodulation does not have auto ranging as do other operational modes, so <a class="el" href="sa__api_8h.html#aa467613c2863277c4b265bc4659871d0">saConfigGainAtten</a> must be called to configure the internal gain, attenuator, and preamplifier.</li>
</ul>
<p >Once configured, initialize the device with the <a class="el" href="sa__api_8h.html#aee1007b54b35d17514281121b5576536">SA_AUDIO</a> mode.</p>
<h2><a class="anchor" id="autotoc_md37"></a>
Usage</h2>
<p >Once the device is streaming, use <a class="el" href="sa__api_8h.html#aa10e5786e41e2dfbb6455ad890455bed">saGetAudio</a> to retrieve 4096 audio samples for an audio sample rate of 30382. The API buffers many seconds' worth of audio.</p>
<h1><a class="anchor" id="snaMode"></a>
Scalar Network Analysis</h1>
<p >When a Signal Hound tracking generator is paired together with a spectrum analyzer, the product can function as a scalar network analyzer to perform insertion loss measurements,or return loss measurements by adding a directional coupler. Throughout this document, this functionality will be referred to as tracking generator (or TG) sweeps.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
Example</h2>
<p >For a list of all examples, please see the <em>examples/</em> folder in the SDK.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="sa__api_8h.html">sa_api.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#pragma comment(lib, &quot;sa_api.lib&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// This example demonstrates how to use the API to perform a single TG sweep.</span></div>
<div class="line"><span class="comment">// See the manual for a full description of each step of the process in the</span></div>
<div class="line"><span class="comment">// Scalar Network Analysis section.</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> trackingGeneratorSweep()</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> handle = -1;</div>
<div class="line">    <a class="code hl_enumeration" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516">saStatus</a> openStatus = <a class="code hl_function" href="sa__api_8h.html#a91d381112ee752949df8b5bb7322378e">saOpenDevice</a>(&amp;handle);</div>
<div class="line">    <span class="keywordflow">if</span>(openStatus != <a class="code hl_enumvalue" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516a393ace7a15801b1377e6934d20f257d7">saNoError</a>) {</div>
<div class="line">        <span class="comment">// Handle unable to open/find device error here</span></div>
<div class="line">        std::cout &lt;&lt; <a class="code hl_function" href="sa__api_8h.html#ac19945a762dbb7abbdc767912c07b0ff">saGetErrorString</a>(openStatus) &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code hl_function" href="sa__api_8h.html#aa9e100fa700dc25234a2dd7d13599344">saAttachTg</a>(handle) != <a class="code hl_enumvalue" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516a393ace7a15801b1377e6934d20f257d7">saNoError</a>) {</div>
<div class="line">        <span class="comment">// Unable to find tracking generator</span></div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Sweep some device at 900MHz center with 1MHz span</span></div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a3bb77c4b40da0998049ca9f7b379c0b9">saConfigCenterSpan</a>(handle, 900.0e6, 1.0e6);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a92a1eb696b61e843e8095cc261789a3a">saConfigAcquisition</a>(handle, <a class="code hl_define" href="sa__api_8h.html#a33fa4c03855dbbd49e88fc8061110c29">SA_MIN_MAX</a>, <a class="code hl_define" href="sa__api_8h.html#a0eee4c54116f0686d93aa7b7ee5858a9">SA_LOG_SCALE</a>);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a7068aea9fcb8661ae86434ffbfe776cc">saConfigLevel</a>(handle, -10.0);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a586c33d0aecdd536547bb8eecb417cc5">saConfigSweepCoupling</a>(handle, 1.0e3, 1.0e3, <span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Additional configuration routine</span></div>
<div class="line">    <span class="comment">// Configure a 100 point sweep</span></div>
<div class="line">    <span class="comment">// The size of the sweep is a suggestion to the API, it will attempt to</span></div>
<div class="line">    <span class="comment">// get near the requested size.</span></div>
<div class="line">    <span class="comment">// Optimized for high dynamic range and passive devices</span></div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#ac619082f16076bcf0743d7e1871a40d5">saConfigTgSweep</a>(handle, 100, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize the device with the configuration just set</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code hl_function" href="sa__api_8h.html#afd615afc09212d6a62937a9d06fac9d4">saInitiate</a>(handle, <a class="code hl_define" href="sa__api_8h.html#a368face3017f830572b921de22cfb875">SA_TG_SWEEP</a>, 0) != <a class="code hl_enumvalue" href="sa__api_8h.html#a9c1cbf155261782b245b98199e307516a393ace7a15801b1377e6934d20f257d7">saNoError</a>) {</div>
<div class="line">        <span class="comment">// Handle unable to initialize</span></div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get sweep characteristics</span></div>
<div class="line">    <span class="keywordtype">int</span> sweepLen;</div>
<div class="line">    <span class="keywordtype">double</span> startFreq, binSize;</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#abfce6ec91fa969330149d1d7489dc2d2">saQuerySweepInfo</a>(handle, &amp;sweepLen, &amp;startFreq, &amp;binSize);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Allocate memory for the sweep</span></div>
<div class="line">    <span class="keywordtype">float</span> *min = <span class="keyword">new</span> <span class="keywordtype">float</span>[sweepLen];</div>
<div class="line">    <span class="keywordtype">float</span> *max = <span class="keyword">new</span> <span class="keywordtype">float</span>[sweepLen];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create test set-up without DUT present</span></div>
<div class="line">    <span class="comment">// Get one sweep</span></div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a0d1d0a2ba8e59f2ee767e7d52e66bc4a">saGetSweep_32f</a>(handle, min, max);</div>
<div class="line">    <span class="comment">// Store baseline</span></div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a4abb8b91fcc2c7a725bd1256bb3909be">saStoreTgThru</a>(handle, <a class="code hl_define" href="sa__api_8h.html#a1d5030d8a63472fecee13a624c3f17ea">TG_THRU_0DB</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Should pause here, and insert DUT into test set-up</span></div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#a0d1d0a2ba8e59f2ee767e7d52e66bc4a">saGetSweep_32f</a>(handle, min, max);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// From here, you can sweep several times without needing to restore the thru, </span></div>
<div class="line">    <span class="comment">// once you change your setup, you should reconfigure the device and </span></div>
<div class="line">    <span class="comment">// store the thru again without the DUT inline.</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">delete</span> [] min;</div>
<div class="line">    <span class="keyword">delete</span> [] max;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#ab4db7a69933089074a057aab3ab4b97e">saAbort</a>(handle);</div>
<div class="line">    <a class="code hl_function" href="sa__api_8h.html#ad88fc31781cddf9f49c77a14b69bc63e">saCloseDevice</a>(handle);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="asa__api_8h_html_a1d5030d8a63472fecee13a624c3f17ea"><div class="ttname"><a href="sa__api_8h.html#a1d5030d8a63472fecee13a624c3f17ea">TG_THRU_0DB</a></div><div class="ttdeci">#define TG_THRU_0DB</div><div class="ttdef"><b>Definition:</b> sa_api.h:163</div></div>
<div class="ttc" id="asa__api_8h_html_a368face3017f830572b921de22cfb875"><div class="ttname"><a href="sa__api_8h.html#a368face3017f830572b921de22cfb875">SA_TG_SWEEP</a></div><div class="ttdeci">#define SA_TG_SWEEP</div><div class="ttdef"><b>Definition:</b> sa_api.h:116</div></div>
<div class="ttc" id="asa__api_8h_html_a4abb8b91fcc2c7a725bd1256bb3909be"><div class="ttname"><a href="sa__api_8h.html#a4abb8b91fcc2c7a725bd1256bb3909be">saStoreTgThru</a></div><div class="ttdeci">SA_API saStatus saStoreTgThru(int device, int flag)</div></div>
<div class="ttc" id="asa__api_8h_html_aa9e100fa700dc25234a2dd7d13599344"><div class="ttname"><a href="sa__api_8h.html#aa9e100fa700dc25234a2dd7d13599344">saAttachTg</a></div><div class="ttdeci">SA_API saStatus saAttachTg(int device)</div></div>
<div class="ttc" id="asa__api_8h_html_ac619082f16076bcf0743d7e1871a40d5"><div class="ttname"><a href="sa__api_8h.html#ac619082f16076bcf0743d7e1871a40d5">saConfigTgSweep</a></div><div class="ttdeci">SA_API saStatus saConfigTgSweep(int device, int sweepSize, bool highDynamicRange, bool passiveDevice)</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md39"></a>
Configuration and Usage</h2>
<p >Scalar Network Analysis can be realized by following these steps:</p>
<ol type="1">
<li>Ensure a Signal Hound spectrum analyzer and tracking generator is connected to your PC.</li>
<li>Open the spectrum analyzer through normal means.</li>
<li>Associate a tracking generator to a spectrum analyzer by calling <a class="el" href="sa__api_8h.html#aa9e100fa700dc25234a2dd7d13599344">saAttachTg</a>. At this point, if a TG is present, it is claimed by the API and cannot be discovered again until <a class="el" href="sa__api_8h.html#ad88fc31781cddf9f49c77a14b69bc63e">saCloseDevice</a> is called.</li>
<li>Configure the device as normal, setting sweep frequencies and reference level (or manually setting gain and attenuation).</li>
<li>Configure the TG sweep with the <a class="el" href="sa__api_8h.html#ac619082f16076bcf0743d7e1871a40d5">saConfigTgSweep</a> function. This function configures TG sweep specific parameters.</li>
<li>Call <a class="el" href="sa__api_8h.html#afd615afc09212d6a62937a9d06fac9d4">saInitiate</a> with the <a class="el" href="sa__api_8h.html#a368face3017f830572b921de22cfb875">SA_TG_SWEEP</a> mode flag.</li>
<li>Get the sweep characteristics with <a class="el" href="sa__api_8h.html#abfce6ec91fa969330149d1d7489dc2d2">saQuerySweepInfo</a>.</li>
<li>Connect the SA and TG device into the final test state without the DUT and perform one sweep with <a class="el" href="sa__api_8h.html#a0d1d0a2ba8e59f2ee767e7d52e66bc4a">saGetSweep_32f</a>/<a class="el" href="sa__api_8h.html#af541c8f2eb96276309b588bfec587650">saGetSweep_64f</a> or <a class="el" href="sa__api_8h.html#ac50c7ed25f054c65d3e7e7dd870b7138">saGetPartialSweep_32f</a>/<a class="el" href="sa__api_8h.html#adf4b207247a7f0defb37dc08e8bfe55c">saGetPartialSweep_64f</a>. After one full sweep has returned, call <a class="el" href="sa__api_8h.html#a4abb8b91fcc2c7a725bd1256bb3909be">saStoreTgThru</a> with the <a class="el" href="sa__api_8h.html#a1d5030d8a63472fecee13a624c3f17ea">TG_THRU_0DB</a> flag.</li>
<li>(Optional) Configure the setup again still without the DUT but with a 20dB pad inserted into the system. Perform an additional full sweep and call <a class="el" href="sa__api_8h.html#a4abb8b91fcc2c7a725bd1256bb3909be">saStoreTgThru</a> with the <a class="el" href="sa__api_8h.html#a3aecf114a37218871c69b71744df6673">TG_THRU_20DB</a>.</li>
<li>Once store through has been called, insert your DUT into the system and then you can freely call the get sweep functions until you modify the configuration or settings.</li>
</ol>
<p >If you modify the test setup or want to re-initialize the device with a new configuration, the store thru must be performed again. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
